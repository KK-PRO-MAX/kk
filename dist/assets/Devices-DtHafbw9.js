import{_ as O,v as q,r as C,g as K,a as Z,c as T,b as N,e as s,d as a,t as p,u as l,l as J,w as r,E as c,h as F,f as y,j as b,I as u,J as z,F as G,p as H,y as A,K as P}from"./index-DeY1YHTF.js";import{u as Q}from"./deviceStore-DSeJX-eW.js";const X={class:"device-management-page"},Y={class:"header-row"},ee={class:"page-title"},ae={class:"header-actions"},le={class:"filter-section"},se={class:"device-cards mobile-cards"},te={class:"card-row data-row"},de={class:"card-cell"},ie={class:"cell-value"},ce={class:"card-cell"},oe={class:"cell-value"},re={class:"card-cell"},ne={class:"cell-value"},ve={class:"card-row data-row"},ue={class:"card-cell"},pe={class:"cell-value"},me={class:"card-cell"},ye={class:"cell-value"},be={class:"card-cell action-cell"},fe={class:"cell-value"},_e={__name:"Devices",setup(he){const R=q(),f=Q(),D=C(""),_=C("All"),h=C(""),B=C(null),U={backgroundColor:"#0C306C",color:"#fff",fontWeight:"600"},E=t=>{R.push({path:"/Devices_all_edit",query:{mode:"edit",deviceName:t.deviceName,deviceId:t.deviceId,code:t.code,deviceType:t.deviceType,assignedBay:t.assignedBay}})},M=()=>{var t;(t=B.value)==null||t.click()},W=async t=>{const e=t.target.files[0];if(!e)return;const n=new FileReader;n.onload=d=>{var i,m,o,L,V,S,$;try{const k=d.target.result;if(e.name.endsWith(".csv")){const I=k.split(`
`),g=[];for(let w=1;w<I.length;w++)if(I[w].trim()){const v=I[w].split(",");g.push({deviceName:((i=v[0])==null?void 0:i.trim())||"",deviceId:((m=v[1])==null?void 0:m.trim())||"",code:((o=v[2])==null?void 0:o.trim())||"",assignedBay:((L=v[3])==null?void 0:L.trim())||"",deviceType:((V=v[4])==null?void 0:V.trim())||"",status:((S=v[5])==null?void 0:S.trim())||"Available",category:(($=v[6])==null?void 0:$.trim())||"A1"})}g.length>0&&(f.deviceList.length=0,f.deviceList.push(...g),A.success(`Successfully imported ${g.length} device records`))}else(e.name.endsWith(".xlsx")||e.name.endsWith(".xls"))&&A.warning("Excel file import requires xlsx library. Please use CSV format or install xlsx library.")}catch(k){console.error("Import failed:",k),A.error("File import failed, please check the file format")}},n.readAsText(e),t.target.value=""},j=()=>{const t="Device Name,Device ID,Barcode or NFC,Assigned Bay,Device Type,Status,Category",e=f.deviceList.map(o=>`${o.deviceName},${o.deviceId},${o.code||""},${o.assignedBay},${o.deviceType},${o.status},${o.category||"A1"}`),n=[t,...e].join(`
`),d=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),m=URL.createObjectURL(d);i.setAttribute("href",m),i.setAttribute("download",`devices_${new Date().getTime()}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),A.success("Device data exported successfully")},x=K(()=>{const t=D.value.trim().toLowerCase();return f.deviceList.filter(e=>{const n=h.value?e.category===h.value:!0,d=_.value==="All"?!0:e.deviceType===_.value,i=t?e.deviceName.toLowerCase().includes(t)||e.deviceId.toLowerCase().includes(t)||e.deviceType.toLowerCase().includes(t)||e.code&&e.code.toLowerCase().includes(t):!0;return n&&d&&i})});return(t,e)=>{const n=Z("router-link");return N(),T("div",X,[s("div",Y,[s("h1",ee,"Devices ("+p(x.value.length)+")",1),s("div",ae,[a(l(J),{modelValue:D.value,"onUpdate:modelValue":e[0]||(e[0]=d=>D.value=d),placeholder:"Search",class:"search-input","prefix-icon":"el-icon-search"},null,8,["modelValue"]),a(l(F),{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=d=>_.value=d),placeholder:"Select type",class:"device-type-select"},{default:r(()=>[a(l(c),{label:"All",value:"All"}),a(l(c),{label:"iPhone",value:"iPhone"}),a(l(c),{label:"iPad",value:"iPad"}),a(l(c),{label:"Laptop",value:"Laptop"}),a(l(c),{label:"Android Phone",value:"Android Phone"}),a(l(c),{label:"Android Tablet",value:"Android Tablet"}),a(l(c),{label:"Zebra",value:"Zebra"})]),_:1},8,["modelValue"]),a(l(b),{class:"import-btn",onClick:M},{default:r(()=>[...e[3]||(e[3]=[y("Import File",-1)])]),_:1}),s("input",{ref_key:"fileInput",ref:B,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:W},null,544),a(l(b),{class:"export-btn",onClick:j},{default:r(()=>[...e[4]||(e[4]=[y("Export File",-1)])]),_:1}),a(n,{to:"/Devices_all_edit"},{default:r(()=>[a(l(b),{type:"primary",class:"add-device-btn"},{default:r(()=>[...e[5]||(e[5]=[y("Add New Device",-1)])]),_:1})]),_:1})])]),s("div",le,[a(l(F),{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=d=>h.value=d),placeholder:"All Categories",clearable:"",style:{width:"200px"}},{default:r(()=>[a(l(c),{label:"All Categories",value:""}),a(l(c),{label:"A1",value:"A1"}),a(l(c),{label:"A2",value:"A2"}),a(l(c),{label:"A3",value:"A3"}),a(l(c),{label:"A4",value:"A4"})]),_:1},8,["modelValue"])]),a(l(z),{data:x.value,"header-cell-style":U,class:"device-table desktop-table"},{default:r(()=>[a(l(u),{prop:"deviceName",label:"Device Name"}),a(l(u),{prop:"deviceId",label:"Device ID"}),a(l(u),{prop:"code",label:"Barcode or NFC*"}),a(l(u),{prop:"deviceType",label:"Device Type"}),a(l(u),{prop:"assignedBay",label:"Assigned Bay"}),a(l(u),{prop:"status",label:"Status"}),a(l(u),{label:"Operation",align:"center"},{default:r(d=>[a(l(b),{type:"primary",plain:"",class:"edit-btn",onClick:i=>E(d.row)},{default:r(()=>[...e[6]||(e[6]=[y(" Edit ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),s("div",se,[(N(!0),T(G,null,H(x.value,(d,i)=>(N(),T("div",{key:i,class:"device-card"},[e[12]||(e[12]=P('<div class="card-row header-row-card" data-v-92873da5><div class="card-cell" data-v-92873da5><div class="cell-label" data-v-92873da5>Device Name</div></div><div class="card-divider-vertical" data-v-92873da5></div><div class="card-cell" data-v-92873da5><div class="cell-label" data-v-92873da5>Device ID</div></div><div class="card-divider-vertical" data-v-92873da5></div><div class="card-cell" data-v-92873da5><div class="cell-label" data-v-92873da5>Barcode or NFC*</div></div></div>',1)),s("div",te,[s("div",de,[s("div",ie,p(d.deviceName),1)]),e[7]||(e[7]=s("div",{class:"card-divider-vertical"},null,-1)),s("div",ce,[s("div",oe,p(d.deviceId),1)]),e[8]||(e[8]=s("div",{class:"card-divider-vertical"},null,-1)),s("div",re,[s("div",ne,p(d.code),1)])]),e[13]||(e[13]=P('<div class="card-row header-row-card" data-v-92873da5><div class="card-cell" data-v-92873da5><div class="cell-label" data-v-92873da5>Device Type</div></div><div class="card-divider-vertical" data-v-92873da5></div><div class="card-cell" data-v-92873da5><div class="cell-label" data-v-92873da5>Assigned Bay</div></div><div class="card-divider-vertical" data-v-92873da5></div><div class="card-cell" data-v-92873da5><div class="cell-label" data-v-92873da5>Action</div></div></div>',1)),s("div",ve,[s("div",ue,[s("div",pe,p(d.deviceType),1)]),e[10]||(e[10]=s("div",{class:"card-divider-vertical"},null,-1)),s("div",me,[s("div",ye,p(d.assignedBay),1)]),e[11]||(e[11]=s("div",{class:"card-divider-vertical"},null,-1)),s("div",be,[s("div",fe,[a(l(b),{type:"primary",plain:"",class:"edit-btn-mobile",onClick:m=>E(d)},{default:r(()=>[...e[9]||(e[9]=[y(" Edit ",-1)])]),_:1},8,["onClick"])])])])]))),128))])])}}},Ce=O(_e,[["__scopeId","data-v-92873da5"]]);export{Ce as default};
